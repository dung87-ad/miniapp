<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { 
            --bg: #0b0b0d; --card: #1c1c1e; --text: #ffffff; 
            --accent: #5865f2; --success: #34c759; --yellow: #ffcc00; 
            --hint: #8e8e93; --border: #2c2c2e;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 15px; padding-bottom: 120px; }

        /* Profile */
        .user-profile { background: var(--card); padding: 12px; border-radius: 20px; display: flex; align-items: center; border: 1px solid var(--border); margin-bottom: 15px; }
        .user-avatar { width: 45px; height: 45px; border-radius: 50%; border: 2px solid var(--accent); margin-right: 12px; }
        .user-info b { font-size: 15px; display: block; }
        .user-info small { color: var(--hint); font-size: 11px; }

        /* News */
        .news-ticker { background: rgba(88, 101, 242, 0.1); border: 1px solid var(--border); border-radius: 12px; padding: 10px; margin-bottom: 15px; font-size: 13px; color: var(--yellow); display: flex; align-items: center; }

        /* Admin Support */
        .support-box { background: var(--card); border-radius: 18px; border: 1px solid var(--border); overflow: hidden; margin-bottom: 20px; }
        .support-item { display: flex; align-items: center; padding: 12px 15px; border-bottom: 1px solid var(--border); text-decoration: none; color: white; font-size: 14px; }
        .support-icon { width: 30px; height: 30px; background: rgba(88,101,242,0.1); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: var(--accent); margin-right: 12px; }

        /* Product List */
        .cat-title { font-size: 14px; font-weight: bold; margin: 15px 0 10px 5px; color: var(--hint); display: flex; align-items: center; }
        .item-card { background: var(--card); border-radius: 15px; border: 1px solid var(--border); margin-bottom: 10px; overflow: hidden; }
        .item-main { padding: 15px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
        .price-list { display: none; background: #111; border-top: 1px solid var(--border); }
        .price-item { padding: 12px 15px; display: flex; justify-content: space-between; border-bottom: 1px solid #222; font-size: 13px; }
        .price-item.active { background: rgba(88,101,242,0.15); border-left: 3px solid var(--accent); }

        /* Footer Buy Button */
        .footer { position: fixed; bottom: 0; left: 0; right: 0; background: rgba(11,11,13,0.98); padding: 15px 20px 30px; border-top: 1px solid var(--border); backdrop-filter: blur(10px); }
        .btn-buy { width: 100%; background: var(--accent); color: white; border: none; border-radius: 12px; padding: 16px; font-weight: bold; font-size: 16px; opacity: 0.4; pointer-events: none; }
        .btn-buy.ready { opacity: 1; pointer-events: auto; }

        /* Modal Card */
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 1000; padding: 20px; align-items: center; justify-content: center; display: none; }
        .modal.open { display: flex; }
        .pay-box { background: #fff; color: #333; padding: 25px; border-radius: 25px; width: 100%; max-width: 350px; text-align: left; position: relative; }
        .pay-box h3 { margin-top: 0; text-align: center; color: #000; }
        .input-group { margin-bottom: 12px; }
        .input-group label { display: block; font-size: 12px; color: #666; margin-bottom: 5px; }
        .input-group select, .input-group input { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px; font-size: 14px; outline: none; }
    </style>
</head>
<body>

    <div class="user-profile">
        <img id="u-avatar" src="https://ui-avatars.com/api/?background=5865f2&color=fff&name=U" class="user-avatar">
        <div class="user-info">
            <b id="u-name">ƒêang t·∫£i...</b>
            <small id="u-id">ID: 00000000</small>
        </div>
    </div>

    <div class="news-ticker">
        <i class="fas fa-bullhorn" style="margin-right:10px; color:var(--accent)"></i>
        <marquee>H·ªá th·ªëng n·∫°p th·∫ª c√†o duy·ªát tay. Vui l√≤ng g·ª≠i ƒë√∫ng m√£ th·∫ª v√† seri ƒë·ªÉ ƒë∆∞·ª£c Admin h·ªó tr·ª£ nhanh nh·∫•t.</marquee>
    </div>

    <div class="support-box">
        <a href="https://t.me/muadongtokyo36" class="support-item"><div class="support-icon"><i class="fas fa-user-shield"></i></div><b>Admin Muadong (Duy·ªát th·∫ª)</b></a>
        <a href="https://t.me/muahatokyo1919" class="support-item"><div class="support-icon"><i class="fas fa-headset"></i></div><b>Admin Muaha (H·ªó tr·ª£)</b></a>
    </div>

    <div class="cat-title"><i class="fas fa-fire" style="margin-right:8px; color:red"></i> S·∫¢N PH·∫®M HACK</div>
    <div id="list-hack"></div>

    <div class="cat-title"><i class="fas fa-cloud" style="margin-right:8px; color:cyan"></i> CLOUD PHONE</div>
    <div id="list-cloud"></div>

    <div class="footer">
        <div style="display:flex; justify-content:space-between; margin-bottom:12px">
            <span id="f-name" style="font-size:13px; color:var(--hint)">Ch·ªçn s·∫£n ph·∫©m...</span>
            <b id="f-price" style="color:var(--success)">0ƒë</b>
        </div>
        <button class="btn-buy" id="pay-btn" onclick="openModal()">TI·∫æP T·ª§C THANH TO√ÅN</button>
    </div>

    <div id="modal-pay" class="modal">
        <div class="pay-box">
            <div onclick="closeModal()" style="position:absolute; top:15px; right:20px; font-size:20px; color:#999; cursor:pointer">&times;</div>
            <h3>N·∫†P TH·∫∫ C√ÄO</h3>
            
            <div class="input-group">
                <label>Lo·∫°i th·∫ª</label>
                <select id="card-type">
                    <option>Viettel</option><option>Vinaphone</option><option>Mobifone</option><option>Zing</option>
                </select>
            </div>

            <div class="input-group">
                <label>M·ªánh gi√°</label>
                <select id="card-amount">
                    <option>10.000ƒë</option><option>20.000ƒë</option><option>50.000ƒë</option><option>100.000ƒë</option><option>200.000ƒë</option><option>500.000ƒë</option>
                </select>
            </div>

            <div class="input-group">
                <label>M√£ th·∫ª (PIN)</label>
                <input type="number" id="card-pin" placeholder="Nh·∫≠p m√£ th·∫ª...">
            </div>

            <div class="input-group">
                <label>S·ªë Seri</label>
                <input type="number" id="card-seri" placeholder="Nh·∫≠p s·ªë seri...">
            </div>

            <button onclick="sendToAdmin()" style="width:100%; padding:15px; border:none; border-radius:12px; background:var(--success); color:white; font-weight:bold; margin-top:10px;">
                G·ª¨I TH·∫∫ CHO ADMIN
            </button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready(); tg.expand();

        const user = tg.initDataUnsafe?.user;
        if(user) {
            document.getElementById('u-name').innerText = user.first_name + (user.last_name ? ' ' + user.last_name : '');
            document.getElementById('u-id').innerText = "ID: " + user.id;
            if(user.photo_url) document.getElementById('u-avatar').src = user.photo_url;
        }

        const PRODUCTS = {
            hack: [
                { id:'h1', name:'Br Mods VIP', p:[["1 Ng√†y",50000],["7 Ng√†y",120000]] },
                { id:'h2', name:'ZyGame Menu', p:[["1 Ng√†y",40000],["Vƒ©nh vi·ªÖn",500000]] }
            ],
            cloud: [
                { id:'c1', name:'CC Cloud Phone', p:[["30 Ng√†y",350000]] },
                { id:'c2', name:'Redfinger Vip', p:[["30 Ng√†y",320000]] }
            ]
        };

        let selectedPrice = 0, selectedName = "";

        function render() {
            for (let k in PRODUCTS) {
                document.getElementById('list-'+k).innerHTML = PRODUCTS[k].map(item => `
                    <div class="item-card">
                        <div class="item-main" onclick="togglePrice('${item.id}')">
                            <b>${item.name}</b> <i class="fas fa-chevron-down" style="font-size:12px; color:#555"></i>
                        </div>
                        <div class="price-list" id="p-${item.id}">
                            ${item.p.map(opt => `<div class="price-item" onclick="selectItem(event,'${item.name} - ${opt[0]}',${opt[1]},this)"><span>${opt[0]}</span><b>${opt[1].toLocaleString()}ƒë</b></div>`).join('')}
                        </div>
                    </div>
                `).join('');
            }
        }
        render();

        function togglePrice(id) {
            const el = document.getElementById('p-'+id);
            const isVisible = el.style.display === 'block';
            document.querySelectorAll('.price-list').forEach(p => p.style.display='none');
            el.style.display = isVisible ? 'none' : 'block';
        }

        function selectItem(e, name, price, el) {
            e.stopPropagation();
            selectedPrice = price; selectedName = name;
            document.querySelectorAll('.price-item').forEach(p => p.classList.remove('active'));
            el.classList.add('active');
            document.getElementById('f-name').innerText = name;
            document.getElementById('f-price').innerText = price.toLocaleString() + "ƒë";
            document.getElementById('pay-btn').classList.add('ready');
        }

        function openModal() { document.getElementById('modal-pay').classList.add('open'); }
        function closeModal() { document.getElementById('modal-pay').classList.remove('open'); }

        function sendToAdmin() {
            const pin = document.getElementById('card-pin').value;
            const seri = document.getElementById('card-seri').value;
            const type = document.getElementById('card-type').value;
            const amount = document.getElementById('card-amount').value;

            if(!pin || !seri) return tg.showAlert("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß m√£ th·∫ª v√† seri!");

            const uName = user ? user.first_name : "Kh√°ch";
            const uId = user ? user.id : "000000";

            const text = `üí≥ **ƒê∆†N H√ÄNG TH·∫∫ C√ÄO**\n` +
                         `üë§ Kh√°ch: ${uName} (ID: ${uId})\n` +
                         `üì¶ Mua: ${selectedName}\n` +
                         `--------------------------\n` +
                         `üîπ Lo·∫°i th·∫ª: ${type}\n` +
                         `üîπ M·ªánh gi√°: ${amount}\n` +
                         `üìå PIN: \`${pin}\`\n` +
                         `üìå SERI: \`${seri}\`\n` +
                         `--------------------------\n` +
                         `‚ö†Ô∏è Admin check th·∫ª v√† tr·∫£ key cho kh√°ch!`;

            tg.sendData(text); // G·ª≠i d·ªØ li·ªáu v√†o bot
            tg.showPopup({ title: "ƒê√£ g·ª≠i th·∫ª", message: "Admin ƒë√£ nh·∫≠n ƒë∆∞·ª£c th√¥ng tin th·∫ª c·ªßa b·∫°n. Vui l√≤ng ch·ªù 1-5 ph√∫t ƒë·ªÉ ƒë∆∞·ª£c duy·ªát v√† g·ª≠i Key!" });
            closeModal();
        }
    </script>
</body>
</html>
